{
  "profiler": "line",
  "test_name": "large_001",
  "step": "step1_original",
  "data": {
    "file_stats": {
      "src/runners/profiling_runner.py": {
        "total_time": 0.185037100003683,
        "lines": [
          {
            "line": 337,
            "hits": 2,
            "total_time": 0.1848621000026469,
            "avg_time": 0.09243105000132346,
            "code": "            result = func(*args, **kwargs)"
          },
          {
            "line": 336,
            "hits": 3,
            "total_time": 8.410000009462237e-05,
            "avg_time": 2.8033333364874125e-05,
            "code": "        for _ in range(max(1, repeat_count)):"
          },
          {
            "line": 335,
            "hits": 1,
            "total_time": 3.6299999919719994e-05,
            "avg_time": 3.6299999919719994e-05,
            "code": "        result = None"
          },
          {
            "line": 333,
            "hits": 1,
            "total_time": 3.18000020342879e-05,
            "avg_time": 3.18000020342879e-05,
            "code": "    def _repeat_step(self, func, repeat_count: int, *args, **kwargs):"
          },
          {
            "line": 338,
            "hits": 1,
            "total_time": 2.2799998987466097e-05,
            "avg_time": 2.2799998987466097e-05,
            "code": "        return result"
          }
        ]
      },
      "src/runners/universal_runner.py": {
        "total_time": 0.1855609999911394,
        "lines": [
          {
            "line": 227,
            "hits": 90,
            "total_time": 0.08278729998710332,
            "avg_time": 0.0009198588887455925,
            "code": "                plausibility = self.adapter.calculate_plausibility(source_data, element)"
          },
          {
            "line": 226,
            "hits": 90,
            "total_time": 0.08131270000012591,
            "avg_time": 0.0009034744444458435,
            "code": "                belief = self.adapter.calculate_belief(source_data, element)"
          },
          {
            "line": 234,
            "hits": 6,
            "total_time": 0.006212799999048002,
            "avg_time": 0.0010354666665080003,
            "code": "            source_results[\"beliefs\"][omega] = self.adapter.calculate_belief(source_data, frame_elements)  # Bel(Ω) = 1.0"
          },
          {
            "line": 235,
            "hits": 6,
            "total_time": 0.00558900000032736,
            "avg_time": 0.00093150000005456,
            "code": "            source_results[\"plausibilities\"][omega] = self.adapter.calculate_plausibility(source_data, frame_elements)  # Pl(Ω) = 1.0"
          },
          {
            "line": 225,
            "hits": 96,
            "total_time": 0.001960599998710677,
            "avg_time": 2.0422916653236218e-05,
            "code": "            for element in frame_elements:"
          },
          {
            "line": 229,
            "hits": 90,
            "total_time": 0.001957799984666053,
            "avg_time": 2.1753333162956146e-05,
            "code": "                source_results[\"beliefs\"][f\"{{{element}}}\"] = belief"
          },
          {
            "line": 230,
            "hits": 90,
            "total_time": 0.001910700011649169,
            "avg_time": 2.123000012943521e-05,
            "code": "                source_results[\"plausibilities\"][f\"{{{element}}}\"] = plausibility"
          },
          {
            "line": 216,
            "hits": 6,
            "total_time": 0.0011260000028414652,
            "avg_time": 0.0001876666671402442,
            "code": "            source_data = self._get_source_data(loaded_data, i)"
          },
          {
            "line": 233,
            "hits": 6,
            "total_time": 0.0003124000140815042,
            "avg_time": 5.206666901358403e-05,
            "code": "            omega = \"{\" + \",\".join(sorted(frame_elements)) + \"}\""
          },
          {
            "line": 205,
            "hits": 2,
            "total_time": 0.0002367999913985841,
            "avg_time": 0.00011839999569929205,
            "code": "        frame_elements = self.adapter.get_frame_of_discernment(loaded_data)"
          },
          {
            "line": 206,
            "hits": 2,
            "total_time": 0.00021640000340994447,
            "avg_time": 0.00010820000170497224,
            "code": "        sources_count = self.adapter.get_sources_count(loaded_data)"
          },
          {
            "line": 214,
            "hits": 8,
            "total_time": 0.00018909999926108867,
            "avg_time": 2.3637499907636084e-05,
            "code": "        for i in range(sources_count):"
          },
          {
            "line": 237,
            "hits": 6,
            "total_time": 0.00017379999917466193,
            "avg_time": 2.8966666529110324e-05,
            "code": "            results[\"sources\"].append(source_results)"
          },
          {
            "line": 465,
            "hits": 6,
            "total_time": 0.00016830000095069408,
            "avg_time": 2.8050000158449013e-05,
            "code": "            single_source_data = loaded_data.copy()"
          },
          {
            "line": 219,
            "hits": 6,
            "total_time": 0.00016109999705804512,
            "avg_time": 2.6849999509674188e-05,
            "code": "                \"source_id\": f\"source_{i+1}\","
          },
          {
            "line": 463,
            "hits": 6,
            "total_time": 0.00014969999756431207,
            "avg_time": 2.4949999594052013e-05,
            "code": "        if isinstance(loaded_data, dict) and 'bpas' in loaded_data:"
          },
          {
            "line": 467,
            "hits": 6,
            "total_time": 0.00014370001008501276,
            "avg_time": 2.395000168083546e-05,
            "code": "                single_source_data['bpas'] = [loaded_data['bpas'][source_index]]"
          },
          {
            "line": 466,
            "hits": 6,
            "total_time": 0.00014319999172585085,
            "avg_time": 2.386666528764181e-05,
            "code": "            if source_index < len(loaded_data['bpas']):"
          },
          {
            "line": 470,
            "hits": 6,
            "total_time": 0.0001297999988310039,
            "avg_time": 2.163333313850065e-05,
            "code": "            return single_source_data"
          },
          {
            "line": 220,
            "hits": 6,
            "total_time": 0.00012409999908413738,
            "avg_time": 2.0683333180689562e-05,
            "code": "                \"beliefs\": {},"
          },
          {
            "line": 218,
            "hits": 6,
            "total_time": 0.0001227000029757619,
            "avg_time": 2.0450000495960314e-05,
            "code": "            source_results = {"
          },
          {
            "line": 221,
            "hits": 6,
            "total_time": 0.00012030000652885064,
            "avg_time": 2.0050001088141773e-05,
            "code": "                \"plausibilities\": {}"
          },
          {
            "line": 458,
            "hits": 6,
            "total_time": 0.00010809999366756529,
            "avg_time": 1.801666561126088e-05,
            "code": "    def _get_source_data(self, loaded_data: Any, source_index: int) -> Any:"
          },
          {
            "line": 208,
            "hits": 2,
            "total_time": 5.03999981447123e-05,
            "avg_time": 2.519999907235615e-05,
            "code": "        results = {"
          },
          {
            "line": 239,
            "hits": 2,
            "total_time": 4.2299994674976915e-05,
            "avg_time": 2.1149997337488458e-05,
            "code": "        return results"
          },
          {
            "line": 210,
            "hits": 2,
            "total_time": 4.1300001612398773e-05,
            "avg_time": 2.0650000806199387e-05,
            "code": "            \"sources\": []"
          },
          {
            "line": 209,
            "hits": 2,
            "total_time": 3.9200000173877925e-05,
            "avg_time": 1.9600000086938962e-05,
            "code": "            \"frame_elements\": frame_elements,"
          },
          {
            "line": 203,
            "hits": 2,
            "total_time": 3.1400006264448166e-05,
            "avg_time": 1.5700003132224083e-05,
            "code": "    def _execute_step1(self, loaded_data: Any) -> Dict[str, Any]:"
          }
        ]
      },
      "src/adapters/our_adapter.py": {
        "total_time": 0.26004360007937066,
        "lines": [
          {
            "line": 231,
            "hits": 180,
            "total_time": 0.028656500035140198,
            "avg_time": 0.0001592027779730011,
            "code": "            return set(self._parse_subset_str(event))"
          },
          {
            "line": 101,
            "hits": 96,
            "total_time": 0.02604750003956724,
            "avg_time": 0.00027132812541215873,
            "code": "        return ds.plausibility(event_set, bpa)"
          },
          {
            "line": 84,
            "hits": 96,
            "total_time": 0.025317900013760664,
            "avg_time": 0.00026372812514334026,
            "code": "        return ds.belief(event_set, bpa)"
          },
          {
            "line": 98,
            "hits": 96,
            "total_time": 0.022554600014700554,
            "avg_time": 0.00023494375015313077,
            "code": "        event_set = self._parse_event(event)"
          },
          {
            "line": 81,
            "hits": 96,
            "total_time": 0.022151899967866484,
            "avg_time": 0.0002307489579986092,
            "code": "        event_set = self._parse_event(event)"
          },
          {
            "line": 91,
            "hits": 96,
            "total_time": 0.016495200019562617,
            "avg_time": 0.00017182500020377725,
            "code": "        bpa = self._extract_bpa_from_data(data)"
          },
          {
            "line": 74,
            "hits": 96,
            "total_time": 0.016478999961691443,
            "avg_time": 0.00017165624960095252,
            "code": "        bpa = self._extract_bpa_from_data(data)"
          },
          {
            "line": 77,
            "hits": 96,
            "total_time": 0.009699599984742235,
            "avg_time": 0.00010103749984106496,
            "code": "        frame = self._extract_frame_from_data(data)"
          },
          {
            "line": 94,
            "hits": 96,
            "total_time": 0.009667499973147642,
            "avg_time": 0.00010070312472028793,
            "code": "        frame = self._extract_frame_from_data(data)"
          },
          {
            "line": 78,
            "hits": 96,
            "total_time": 0.007847300061257556,
            "avg_time": 8.174270897143288e-05,
            "code": "        ds = DempsterShafer(frame)"
          },
          {
            "line": 95,
            "hits": 96,
            "total_time": 0.007837199969799258,
            "avg_time": 8.163749968540894e-05,
            "code": "        ds = DempsterShafer(frame)"
          },
          {
            "line": 212,
            "hits": 192,
            "total_time": 0.005248499968729448,
            "avg_time": 2.733593733713254e-05,
            "code": "            if data and isinstance(next(iter(data.keys())), frozenset):"
          },
          {
            "line": 242,
            "hits": 180,
            "total_time": 0.00511849998292746,
            "avg_time": 2.8436111016263667e-05,
            "code": "        elements = subset_str.strip(\"{}\").split(\",\")"
          },
          {
            "line": 246,
            "hits": 180,
            "total_time": 0.004303600006096531,
            "avg_time": 2.3908888922758504e-05,
            "code": "        return frozenset(elements)"
          },
          {
            "line": 230,
            "hits": 192,
            "total_time": 0.00422509996133158,
            "avg_time": 2.2005728965268645e-05,
            "code": "        if isinstance(event, str):"
          },
          {
            "line": 210,
            "hits": 192,
            "total_time": 0.004209699975035619,
            "avg_time": 2.1925520703310514e-05,
            "code": "        if isinstance(data, dict):"
          },
          {
            "line": 243,
            "hits": 180,
            "total_time": 0.004149199994571973,
            "avg_time": 2.3051111080955405e-05,
            "code": "        if elements == ['']:"
          },
          {
            "line": 195,
            "hits": 192,
            "total_time": 0.004147699983150233,
            "avg_time": 2.160260407890746e-05,
            "code": "        if isinstance(data, dict) and 'frame' in data:"
          },
          {
            "line": 218,
            "hits": 192,
            "total_time": 0.004096100012247916,
            "avg_time": 2.13338542304579e-05,
            "code": "            elif 'bpas' in data and data['bpas']:"
          },
          {
            "line": 215,
            "hits": 192,
            "total_time": 0.0040391999937128276,
            "avg_time": 2.103749996725431e-05,
            "code": "            elif 'bpa' in data:"
          },
          {
            "line": 239,
            "hits": 180,
            "total_time": 0.004035700003441889,
            "avg_time": 2.242055557467716e-05,
            "code": "        if subset_str == \"{}\":"
          },
          {
            "line": 219,
            "hits": 192,
            "total_time": 0.003994799953943584,
            "avg_time": 2.0806249760122835e-05,
            "code": "                return data['bpas'][0]"
          },
          {
            "line": 196,
            "hits": 192,
            "total_time": 0.003943400020943955,
            "avg_time": 2.0538541775749763e-05,
            "code": "            return data['frame']"
          },
          {
            "line": 207,
            "hits": 192,
            "total_time": 0.003079100075410679,
            "avg_time": 1.603697955943062e-05,
            "code": "    def _extract_bpa_from_data(self, data: Any) -> Dict:"
          },
          {
            "line": 228,
            "hits": 192,
            "total_time": 0.0030330999434227124,
            "avg_time": 1.579739553865996e-05,
            "code": "    def _parse_event(self, event: Union[str, List[str]]) -> set:"
          },
          {
            "line": 193,
            "hits": 192,
            "total_time": 0.0030128000216791406,
            "avg_time": 1.5691666779578856e-05,
            "code": "    def _extract_frame_from_data(self, data: Any) -> Set[str]:"
          },
          {
            "line": 237,
            "hits": 180,
            "total_time": 0.0028685000725090504,
            "avg_time": 1.593611151393917e-05,
            "code": "    def _parse_subset_str(self, subset_str: str) -> frozenset:"
          },
          {
            "line": 86,
            "hits": 96,
            "total_time": 0.0015015000099083409,
            "avg_time": 1.5640625103211885e-05,
            "code": "    def calculate_plausibility(self, data: Any, event: Union[str, List[str]]) -> float:"
          },
          {
            "line": 61,
            "hits": 96,
            "total_time": 0.001468600043153856,
            "avg_time": 1.5297917116186e-05,
            "code": "    def calculate_belief(self, data: Any, event: Union[str, List[str]]) -> float:"
          },
          {
            "line": 233,
            "hits": 12,
            "total_time": 0.0002928000030806288,
            "avg_time": 2.4400000256719068e-05,
            "code": "            return set(event)"
          }
        ]
      },
      "src/core/dempster_core.py": {
        "total_time": 0.0731757000030484,
        "lines": [
          {
            "line": 43,
            "hits": 618,
            "total_time": 0.02998909997404553,
            "avg_time": 4.852605173793775e-05,
            "code": "        return sum(mass for subset, mass in bpa.items() if subset.intersection(event_fs))"
          },
          {
            "line": 38,
            "hits": 608,
            "total_time": 0.028751400008331984,
            "avg_time": 4.7288486855809186e-05,
            "code": "        return sum(mass for subset, mass in bpa.items() if subset.issubset(event_fs))"
          },
          {
            "line": 11,
            "hits": 192,
            "total_time": 0.004038600040075835,
            "avg_time": 2.1034375208728306e-05,
            "code": "        self.frame = frame_of_discernment"
          },
          {
            "line": 10,
            "hits": 192,
            "total_time": 0.0030619000099250115,
            "avg_time": 1.59473958850261e-05,
            "code": "    def __init__(self, frame_of_discernment: Set[str]):"
          },
          {
            "line": 37,
            "hits": 96,
            "total_time": 0.002145600017684046,
            "avg_time": 2.2350000184208813e-05,
            "code": "        event_fs = frozenset(event)"
          },
          {
            "line": 42,
            "hits": 96,
            "total_time": 0.0021398000098997727,
            "avg_time": 2.2289583436455967e-05,
            "code": "        event_fs = frozenset(event)"
          },
          {
            "line": 40,
            "hits": 96,
            "total_time": 0.0015427999824169092,
            "avg_time": 1.607083315017614e-05,
            "code": "    def plausibility(self, event: Set[str], bpa: Dict[FrozenSet, float]) -> float:"
          },
          {
            "line": 35,
            "hits": 96,
            "total_time": 0.0015064999606693164,
            "avg_time": 1.569270792363871e-05,
            "code": "    def belief(self, event: Set[str], bpa: Dict[FrozenSet, float]) -> float:"
          }
        ]
      },
      "src/profiling/composite_profiler.py": {
        "total_time": 0.9231787000026088,
        "lines": [
          {
            "line": 85,
            "hits": 2,
            "total_time": 0.9229769999947166,
            "avg_time": 0.4614884999973583,
            "code": "                result = profiler.stop()"
          },
          {
            "line": 84,
            "hits": 3,
            "total_time": 7.500000356230885e-05,
            "avg_time": 2.5000001187436283e-05,
            "code": "            if profiler.enabled:"
          },
          {
            "line": 83,
            "hits": 3,
            "total_time": 5.869999586138874e-05,
            "avg_time": 1.956666528712958e-05,
            "code": "        for name, profiler in self.profilers.items():"
          },
          {
            "line": 86,
            "hits": 2,
            "total_time": 2.7300004148855805e-05,
            "avg_time": 1.3650002074427903e-05,
            "code": "                all_results[name] = result"
          },
          {
            "line": 81,
            "hits": 1,
            "total_time": 2.42000023717992e-05,
            "avg_time": 2.42000023717992e-05,
            "code": "        all_results = {}"
          },
          {
            "line": 79,
            "hits": 1,
            "total_time": 1.6500001947861165e-05,
            "avg_time": 1.6500001947861165e-05,
            "code": "    def stop_all(self) -> CompositeProfileResult:"
          }
        ]
      },
      "src/profiling/core/base_profiler.py": {
        "total_time": 0.9229072999878554,
        "lines": [
          {
            "line": 72,
            "hits": 2,
            "total_time": 0.9221648999882746,
            "avg_time": 0.4610824499941373,
            "code": "        profiler_data = self._on_stop()"
          },
          {
            "line": 75,
            "hits": 4,
            "total_time": 0.00020650000078603625,
            "avg_time": 5.162500019650906e-05,
            "code": "        self.results = ProfileResult("
          },
          {
            "line": 68,
            "hits": 3,
            "total_time": 7.479999476345256e-05,
            "avg_time": 2.493333158781752e-05,
            "code": "        end_time = time.perf_counter()"
          },
          {
            "line": 65,
            "hits": 3,
            "total_time": 6.240000220714137e-05,
            "avg_time": 2.080000073571379e-05,
            "code": "        if self.state != ProfilerState.RUNNING:"
          },
          {
            "line": 69,
            "hits": 3,
            "total_time": 5.870000313734636e-05,
            "avg_time": 1.9566667712448787e-05,
            "code": "        duration = end_time - (self.start_time or end_time)"
          },
          {
            "line": 62,
            "hits": 3,
            "total_time": 5.819999933009967e-05,
            "avg_time": 1.939999977669989e-05,
            "code": "        if not self.enabled:"
          },
          {
            "line": 60,
            "hits": 3,
            "total_time": 4.479999915929511e-05,
            "avg_time": 1.4933333053098371e-05,
            "code": "    def stop(self) -> ProfileResult:"
          },
          {
            "line": 80,
            "hits": 2,
            "total_time": 3.6299999919719994e-05,
            "avg_time": 1.8149999959859997e-05,
            "code": "                'start_time': self.start_time,"
          },
          {
            "line": 86,
            "hits": 2,
            "total_time": 3.089999518124387e-05,
            "avg_time": 1.5449997590621933e-05,
            "code": "        self.state = ProfilerState.STOPPED"
          },
          {
            "line": 81,
            "hits": 2,
            "total_time": 2.5699999241624027e-05,
            "avg_time": 1.2849999620812014e-05,
            "code": "                'end_time': end_time,"
          },
          {
            "line": 77,
            "hits": 2,
            "total_time": 2.469999890308827e-05,
            "avg_time": 1.2349999451544136e-05,
            "code": "            metadata={"
          },
          {
            "line": 87,
            "hits": 2,
            "total_time": 2.469999890308827e-05,
            "avg_time": 1.2349999451544136e-05,
            "code": "        return self.results"
          },
          {
            "line": 78,
            "hits": 2,
            "total_time": 2.4599998141638935e-05,
            "avg_time": 1.2299999070819467e-05,
            "code": "                'profiler_name': self.name,"
          },
          {
            "line": 76,
            "hits": 2,
            "total_time": 2.370000584051013e-05,
            "avg_time": 1.1850002920255065e-05,
            "code": "            data=profiler_data,"
          },
          {
            "line": 83,
            "hits": 2,
            "total_time": 2.340000355616212e-05,
            "avg_time": 1.170000177808106e-05,
            "code": "            duration_seconds=duration"
          },
          {
            "line": 79,
            "hits": 2,
            "total_time": 2.300000051036477e-05,
            "avg_time": 1.1500000255182385e-05,
            "code": "                'duration_seconds': duration,"
          }
        ]
      },
      "src/profiling/core/cpu_profiler.py": {
        "total_time": 0.533218099939404,
        "lines": [
          {
            "line": 57,
            "hits": 1,
            "total_time": 0.15913759999966715,
            "avg_time": 0.15913759999966715,
            "code": "        top_functions = self._get_top_functions(stats)"
          },
          {
            "line": 113,
            "hits": 1,
            "total_time": 0.06368430000293301,
            "avg_time": 0.06368430000293301,
            "code": "        stats_stream.sort_stats(self.sort_by)"
          },
          {
            "line": 112,
            "hits": 1,
            "total_time": 0.059150899993255734,
            "avg_time": 0.059150899993255734,
            "code": "        stats_stream = pstats.Stats(self.profiler, stream=output)"
          },
          {
            "line": 54,
            "hits": 1,
            "total_time": 0.05669889999990119,
            "avg_time": 0.05669889999990119,
            "code": "        stats = pstats.Stats(self.profiler)"
          },
          {
            "line": 51,
            "hits": 1,
            "total_time": 0.03898320000007516,
            "avg_time": 0.03898320000007516,
            "code": "            self.profiler.dump_stats(self.temp_file)"
          },
          {
            "line": 61,
            "hits": 1,
            "total_time": 0.030728000005183276,
            "avg_time": 0.030728000005183276,
            "code": "        file_stats = self._analyze_by_file(stats_dict)"
          },
          {
            "line": 114,
            "hits": 1,
            "total_time": 0.023402999999234453,
            "avg_time": 0.023402999999234453,
            "code": "        stats_stream.print_stats(self.limit)"
          },
          {
            "line": 64,
            "hits": 1,
            "total_time": 0.021171599997614976,
            "avg_time": 0.021171599997614976,
            "code": "        total_stats = self._get_total_stats(stats_dict)"
          },
          {
            "line": 88,
            "hits": 187,
            "total_time": 0.008864200004609302,
            "avg_time": 4.740213906208183e-05,
            "code": "        total_calls = sum(stat[0] for stat in stats_dict.values())"
          },
          {
            "line": 91,
            "hits": 4,
            "total_time": 0.00827509999362519,
            "avg_time": 0.0020687749984062975,
            "code": "        primitive_calls = sum("
          },
          {
            "line": 97,
            "hits": 4,
            "total_time": 0.007281100006366614,
            "avg_time": 0.0018202750015916536,
            "code": "        total_time = sum("
          },
          {
            "line": 92,
            "hits": 184,
            "total_time": 0.0037308000173652545,
            "avg_time": 2.0276087050898123e-05,
            "code": "            stat[0] - stat[1] if len(stat) > 1 and stat[1] > 0 else stat[0]"
          },
          {
            "line": 98,
            "hits": 184,
            "total_time": 0.0033174999261973426,
            "avg_time": 1.802989090324643e-05,
            "code": "            stat[3] if len(stat) > 3 else 0.0"
          },
          {
            "line": 177,
            "hits": 92,
            "total_time": 0.00245869999343995,
            "avg_time": 2.672499992869511e-05,
            "code": "            func_key_str = f\"{func_name}:{line_num}\""
          },
          {
            "line": 93,
            "hits": 94,
            "total_time": 0.00229639996541664,
            "avg_time": 2.4429786866134468e-05,
            "code": "            for stat in stats_dict.values()"
          },
          {
            "line": 184,
            "hits": 92,
            "total_time": 0.0021080000151414424,
            "avg_time": 2.2913043642841764e-05,
            "code": "            file_stats[filename]['functions'][func_key_str]['cumulative_time'] += cumulative_time"
          },
          {
            "line": 159,
            "hits": 93,
            "total_time": 0.002028100047027692,
            "avg_time": 2.1807527387394538e-05,
            "code": "        for func_key, stat_data in stats_dict.items():"
          },
          {
            "line": 185,
            "hits": 92,
            "total_time": 0.0019975999457528815,
            "avg_time": 2.1713042888618276e-05,
            "code": "            file_stats[filename]['functions'][func_key_str]['call_count'] += call_count"
          },
          {
            "line": 179,
            "hits": 92,
            "total_time": 0.0019831000099657103,
            "avg_time": 2.1555434890931633e-05,
            "code": "                file_stats[filename]['functions'][func_key_str] = {"
          },
          {
            "line": 181,
            "hits": 92,
            "total_time": 0.0019781000082730316,
            "avg_time": 2.1501087046445996e-05,
            "code": "                    'call_count': 0"
          },
          {
            "line": 178,
            "hits": 92,
            "total_time": 0.001968500015209429,
            "avg_time": 2.1396739295754664e-05,
            "code": "            if func_key_str not in file_stats[filename]['functions']:"
          },
          {
            "line": 136,
            "hits": 80,
            "total_time": 0.0019475999943097122,
            "avg_time": 2.4344999928871403e-05,
            "code": "                    cumulative_time = float(parts[5])"
          },
          {
            "line": 180,
            "hits": 92,
            "total_time": 0.0019380999583518133,
            "avg_time": 2.1066303895128406e-05,
            "code": "                    'cumulative_time': 0.0,"
          },
          {
            "line": 174,
            "hits": 92,
            "total_time": 0.0019328000489622355,
            "avg_time": 2.1008696184372123e-05,
            "code": "            file_stats[filename]['call_count'] += call_count"
          },
          {
            "line": 170,
            "hits": 92,
            "total_time": 0.0019265999872004613,
            "avg_time": 2.0941304208700668e-05,
            "code": "            cumulative_time = stat_data[3] if len(stat_data) > 3 else 0.0"
          },
          {
            "line": 160,
            "hits": 92,
            "total_time": 0.0019236000007367693,
            "avg_time": 2.0908695660182275e-05,
            "code": "            filename, line_num, func_name = func_key"
          },
          {
            "line": 99,
            "hits": 94,
            "total_time": 0.001917900015541818,
            "avg_time": 2.040319165470019e-05,
            "code": "            for stat in stats_dict.values()"
          },
          {
            "line": 173,
            "hits": 92,
            "total_time": 0.00191119997180067,
            "avg_time": 2.0773912736963805e-05,
            "code": "            file_stats[filename]['total_time'] += cumulative_time"
          },
          {
            "line": 171,
            "hits": 92,
            "total_time": 0.0018955000196001492,
            "avg_time": 2.0603261082610317e-05,
            "code": "            call_count = stat_data[0] if len(stat_data) > 0 else 0"
          },
          {
            "line": 162,
            "hits": 92,
            "total_time": 0.0018932999882963486,
            "avg_time": 2.0579347698873356e-05,
            "code": "            if filename not in file_stats:"
          }
        ]
      },
      "<string>": {
        "total_time": 0.0001049999991664663,
        "lines": [
          {
            "line": 3,
            "hits": 2,
            "total_time": 3.360000118846074e-05,
            "avg_time": 1.680000059423037e-05,
            "code": ""
          },
          {
            "line": 4,
            "hits": 2,
            "total_time": 2.61999957729131e-05,
            "avg_time": 1.309999788645655e-05,
            "code": ""
          },
          {
            "line": 5,
            "hits": 2,
            "total_time": 2.5200002710334957e-05,
            "avg_time": 1.2600001355167478e-05,
            "code": ""
          },
          {
            "line": 2,
            "hits": 2,
            "total_time": 1.9999999494757503e-05,
            "avg_time": 9.999999747378752e-06,
            "code": ""
          }
        ]
      },
      "src/profiling/core/memory_profiler.py": {
        "total_time": 0.6657057999982499,
        "lines": [
          {
            "line": 44,
            "hits": 1,
            "total_time": 0.5745683000059216,
            "avg_time": 0.5745683000059216,
            "code": "        stats = snapshot_end.compare_to(self.snapshot_start, 'lineno')"
          },
          {
            "line": 47,
            "hits": 1,
            "total_time": 0.03606069999659667,
            "avg_time": 0.03606069999659667,
            "code": "        memory_stats = self._analyze_memory_stats(stats)"
          },
          {
            "line": 77,
            "hits": 275,
            "total_time": 0.013456900021992624,
            "avg_time": 4.8934181898154995e-05,
            "code": "        total_size = sum(stat.size for stat in stats)"
          },
          {
            "line": 78,
            "hits": 275,
            "total_time": 0.013262599968584254,
            "avg_time": 4.822763624939729e-05,
            "code": "        total_count = sum(stat.count for stat in stats)"
          },
          {
            "line": 117,
            "hits": 10,
            "total_time": 0.005356899993785191,
            "avg_time": 0.0005356899993785192,
            "code": "            traceback_str = self._format_traceback(stat.traceback)"
          },
          {
            "line": 138,
            "hits": 20,
            "total_time": 0.0024489000061294064,
            "avg_time": 0.00012244500030647031,
            "code": "        for frame in traceback[:5]:  # Ограничиваем глубину"
          },
          {
            "line": 85,
            "hits": 20,
            "total_time": 0.0023784000368323177,
            "avg_time": 0.00011892000184161588,
            "code": "                frame = traceback[0]"
          },
          {
            "line": 41,
            "hits": 1,
            "total_time": 0.002161899996281136,
            "avg_time": 0.002161899996281136,
            "code": "        snapshot_end = tracemalloc.take_snapshot()"
          },
          {
            "line": 57,
            "hits": 1,
            "total_time": 0.0015123999983188696,
            "avg_time": 0.0015123999983188696,
            "code": "        tracemalloc.stop()"
          },
          {
            "line": 86,
            "hits": 20,
            "total_time": 0.0012312999970163219,
            "avg_time": 6.15649998508161e-05,
            "code": "                filename = frame.filename"
          },
          {
            "line": 84,
            "hits": 20,
            "total_time": 0.0012243999881320633,
            "avg_time": 6.121999940660317e-05,
            "code": "            if traceback:"
          },
          {
            "line": 87,
            "hits": 20,
            "total_time": 0.0012020999783999287,
            "avg_time": 6.0104998919996436e-05,
            "code": "                lineno = frame.lineno"
          },
          {
            "line": 139,
            "hits": 10,
            "total_time": 0.0011365000100340694,
            "avg_time": 0.00011365000100340694,
            "code": "            frames.append(f\"{frame.filename}:{frame.lineno}\")"
          },
          {
            "line": 134,
            "hits": 10,
            "total_time": 0.0006841000140411779,
            "avg_time": 6.841000140411779e-05,
            "code": "        if not traceback:"
          },
          {
            "line": 82,
            "hits": 21,
            "total_time": 0.0004521000009845011,
            "avg_time": 2.1528571475452434e-05,
            "code": "        for stat in stats[:self.limit]:  # Ограничиваем количество"
          },
          {
            "line": 96,
            "hits": 20,
            "total_time": 0.0004495000102906488,
            "avg_time": 2.2475000514532438e-05,
            "code": "                file_stats[filename]['total_size'] += stat.size"
          },
          {
            "line": 107,
            "hits": 20,
            "total_time": 0.0004459000119823031,
            "avg_time": 2.2295000599115154e-05,
            "code": "                if hasattr(stat, 'size_diff'):"
          },
          {
            "line": 118,
            "hits": 20,
            "total_time": 0.0004321000087657012,
            "avg_time": 2.160500043828506e-05,
            "code": "            top_allocations.append({"
          },
          {
            "line": 97,
            "hits": 20,
            "total_time": 0.00043009999353671446,
            "avg_time": 2.1504999676835723e-05,
            "code": "                file_stats[filename]['total_count'] += stat.count"
          },
          {
            "line": 102,
            "hits": 20,
            "total_time": 0.00042949999624397606,
            "avg_time": 2.1474999812198803e-05,
            "code": "                    'size': stat.size,"
          },
          {
            "line": 103,
            "hits": 20,
            "total_time": 0.0004284000024199486,
            "avg_time": 2.1420000120997428e-05,
            "code": "                    'count': stat.count,"
          },
          {
            "line": 83,
            "hits": 20,
            "total_time": 0.0004225999946356751,
            "avg_time": 2.1129999731783754e-05,
            "code": "            traceback = stat.traceback"
          },
          {
            "line": 100,
            "hits": 20,
            "total_time": 0.0004183999844826758,
            "avg_time": 2.0919999224133788e-05,
            "code": "                location_info = {"
          },
          {
            "line": 112,
            "hits": 20,
            "total_time": 0.00041649999911896884,
            "avg_time": 2.0824999955948444e-05,
            "code": "                file_stats[filename]['locations'].append(location_info)"
          },
          {
            "line": 89,
            "hits": 20,
            "total_time": 0.0004147000072407536,
            "avg_time": 2.073500036203768e-05,
            "code": "                if filename not in file_stats:"
          },
          {
            "line": 101,
            "hits": 20,
            "total_time": 0.00041400000191060826,
            "avg_time": 2.0700000095530414e-05,
            "code": "                    'line': lineno,"
          },
          {
            "line": 109,
            "hits": 20,
            "total_time": 0.00040919999446487054,
            "avg_time": 2.045999972324353e-05,
            "code": "                if hasattr(stat, 'count_diff'):"
          },
          {
            "line": 108,
            "hits": 20,
            "total_time": 0.00040660000377101824,
            "avg_time": 2.0330000188550913e-05,
            "code": "                    location_info['size_diff'] = stat.size_diff"
          },
          {
            "line": 110,
            "hits": 20,
            "total_time": 0.0004050999996252358,
            "avg_time": 2.025499998126179e-05,
            "code": "                    location_info['count_diff'] = stat.count_diff"
          },
          {
            "line": 120,
            "hits": 10,
            "total_time": 0.0002924999935203232,
            "avg_time": 2.9249999352032317e-05,
            "code": "                'count': stat.count,"
          }
        ]
      },
      "src/profiling/core/line_profiler.py": {
        "total_time": 2.0999941625632346e-06,
        "lines": [
          {
            "line": 115,
            "hits": 1,
            "total_time": 2.0999941625632346e-06,
            "avg_time": 2.0999941625632346e-06,
            "code": "    def _on_stop(self) -> Dict[str, Any]:"
          }
        ]
      }
    },
    "top_lines": [
      {
        "filename": "src/profiling/composite_profiler.py",
        "line": 85,
        "hits": 2,
        "total_time": 0.9229769999947166,
        "avg_time": 0.4614884999973583,
        "code": "                result = profiler.stop()"
      },
      {
        "filename": "src/profiling/core/base_profiler.py",
        "line": 72,
        "hits": 2,
        "total_time": 0.9221648999882746,
        "avg_time": 0.4610824499941373,
        "code": "        profiler_data = self._on_stop()"
      },
      {
        "filename": "src/profiling/core/memory_profiler.py",
        "line": 44,
        "hits": 1,
        "total_time": 0.5745683000059216,
        "avg_time": 0.5745683000059216,
        "code": "        stats = snapshot_end.compare_to(self.snapshot_start, 'lineno')"
      },
      {
        "filename": "src/runners/profiling_runner.py",
        "line": 337,
        "hits": 2,
        "total_time": 0.1848621000026469,
        "avg_time": 0.09243105000132346,
        "code": "            result = func(*args, **kwargs)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 57,
        "hits": 1,
        "total_time": 0.15913759999966715,
        "avg_time": 0.15913759999966715,
        "code": "        top_functions = self._get_top_functions(stats)"
      },
      {
        "filename": "src/runners/universal_runner.py",
        "line": 227,
        "hits": 90,
        "total_time": 0.08278729998710332,
        "avg_time": 0.0009198588887455925,
        "code": "                plausibility = self.adapter.calculate_plausibility(source_data, element)"
      },
      {
        "filename": "src/runners/universal_runner.py",
        "line": 226,
        "hits": 90,
        "total_time": 0.08131270000012591,
        "avg_time": 0.0009034744444458435,
        "code": "                belief = self.adapter.calculate_belief(source_data, element)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 113,
        "hits": 1,
        "total_time": 0.06368430000293301,
        "avg_time": 0.06368430000293301,
        "code": "        stats_stream.sort_stats(self.sort_by)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 112,
        "hits": 1,
        "total_time": 0.059150899993255734,
        "avg_time": 0.059150899993255734,
        "code": "        stats_stream = pstats.Stats(self.profiler, stream=output)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 54,
        "hits": 1,
        "total_time": 0.05669889999990119,
        "avg_time": 0.05669889999990119,
        "code": "        stats = pstats.Stats(self.profiler)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 51,
        "hits": 1,
        "total_time": 0.03898320000007516,
        "avg_time": 0.03898320000007516,
        "code": "            self.profiler.dump_stats(self.temp_file)"
      },
      {
        "filename": "src/profiling/core/memory_profiler.py",
        "line": 47,
        "hits": 1,
        "total_time": 0.03606069999659667,
        "avg_time": 0.03606069999659667,
        "code": "        memory_stats = self._analyze_memory_stats(stats)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 61,
        "hits": 1,
        "total_time": 0.030728000005183276,
        "avg_time": 0.030728000005183276,
        "code": "        file_stats = self._analyze_by_file(stats_dict)"
      },
      {
        "filename": "src/core/dempster_core.py",
        "line": 43,
        "hits": 618,
        "total_time": 0.02998909997404553,
        "avg_time": 4.852605173793775e-05,
        "code": "        return sum(mass for subset, mass in bpa.items() if subset.intersection(event_fs))"
      },
      {
        "filename": "src/core/dempster_core.py",
        "line": 38,
        "hits": 608,
        "total_time": 0.028751400008331984,
        "avg_time": 4.7288486855809186e-05,
        "code": "        return sum(mass for subset, mass in bpa.items() if subset.issubset(event_fs))"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 231,
        "hits": 180,
        "total_time": 0.028656500035140198,
        "avg_time": 0.0001592027779730011,
        "code": "            return set(self._parse_subset_str(event))"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 101,
        "hits": 96,
        "total_time": 0.02604750003956724,
        "avg_time": 0.00027132812541215873,
        "code": "        return ds.plausibility(event_set, bpa)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 84,
        "hits": 96,
        "total_time": 0.025317900013760664,
        "avg_time": 0.00026372812514334026,
        "code": "        return ds.belief(event_set, bpa)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 114,
        "hits": 1,
        "total_time": 0.023402999999234453,
        "avg_time": 0.023402999999234453,
        "code": "        stats_stream.print_stats(self.limit)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 98,
        "hits": 96,
        "total_time": 0.022554600014700554,
        "avg_time": 0.00023494375015313077,
        "code": "        event_set = self._parse_event(event)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 81,
        "hits": 96,
        "total_time": 0.022151899967866484,
        "avg_time": 0.0002307489579986092,
        "code": "        event_set = self._parse_event(event)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 64,
        "hits": 1,
        "total_time": 0.021171599997614976,
        "avg_time": 0.021171599997614976,
        "code": "        total_stats = self._get_total_stats(stats_dict)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 91,
        "hits": 96,
        "total_time": 0.016495200019562617,
        "avg_time": 0.00017182500020377725,
        "code": "        bpa = self._extract_bpa_from_data(data)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 74,
        "hits": 96,
        "total_time": 0.016478999961691443,
        "avg_time": 0.00017165624960095252,
        "code": "        bpa = self._extract_bpa_from_data(data)"
      },
      {
        "filename": "src/profiling/core/memory_profiler.py",
        "line": 77,
        "hits": 275,
        "total_time": 0.013456900021992624,
        "avg_time": 4.8934181898154995e-05,
        "code": "        total_size = sum(stat.size for stat in stats)"
      },
      {
        "filename": "src/profiling/core/memory_profiler.py",
        "line": 78,
        "hits": 275,
        "total_time": 0.013262599968584254,
        "avg_time": 4.822763624939729e-05,
        "code": "        total_count = sum(stat.count for stat in stats)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 77,
        "hits": 96,
        "total_time": 0.009699599984742235,
        "avg_time": 0.00010103749984106496,
        "code": "        frame = self._extract_frame_from_data(data)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 94,
        "hits": 96,
        "total_time": 0.009667499973147642,
        "avg_time": 0.00010070312472028793,
        "code": "        frame = self._extract_frame_from_data(data)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 88,
        "hits": 187,
        "total_time": 0.008864200004609302,
        "avg_time": 4.740213906208183e-05,
        "code": "        total_calls = sum(stat[0] for stat in stats_dict.values())"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 91,
        "hits": 4,
        "total_time": 0.00827509999362519,
        "avg_time": 0.0020687749984062975,
        "code": "        primitive_calls = sum("
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 78,
        "hits": 96,
        "total_time": 0.007847300061257556,
        "avg_time": 8.174270897143288e-05,
        "code": "        ds = DempsterShafer(frame)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 95,
        "hits": 96,
        "total_time": 0.007837199969799258,
        "avg_time": 8.163749968540894e-05,
        "code": "        ds = DempsterShafer(frame)"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 97,
        "hits": 4,
        "total_time": 0.007281100006366614,
        "avg_time": 0.0018202750015916536,
        "code": "        total_time = sum("
      },
      {
        "filename": "src/runners/universal_runner.py",
        "line": 234,
        "hits": 6,
        "total_time": 0.006212799999048002,
        "avg_time": 0.0010354666665080003,
        "code": "            source_results[\"beliefs\"][omega] = self.adapter.calculate_belief(source_data, frame_elements)  # Bel(Ω) = 1.0"
      },
      {
        "filename": "src/runners/universal_runner.py",
        "line": 235,
        "hits": 6,
        "total_time": 0.00558900000032736,
        "avg_time": 0.00093150000005456,
        "code": "            source_results[\"plausibilities\"][omega] = self.adapter.calculate_plausibility(source_data, frame_elements)  # Pl(Ω) = 1.0"
      },
      {
        "filename": "src/profiling/core/memory_profiler.py",
        "line": 117,
        "hits": 10,
        "total_time": 0.005356899993785191,
        "avg_time": 0.0005356899993785192,
        "code": "            traceback_str = self._format_traceback(stat.traceback)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 212,
        "hits": 192,
        "total_time": 0.005248499968729448,
        "avg_time": 2.733593733713254e-05,
        "code": "            if data and isinstance(next(iter(data.keys())), frozenset):"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 242,
        "hits": 180,
        "total_time": 0.00511849998292746,
        "avg_time": 2.8436111016263667e-05,
        "code": "        elements = subset_str.strip(\"{}\").split(\",\")"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 246,
        "hits": 180,
        "total_time": 0.004303600006096531,
        "avg_time": 2.3908888922758504e-05,
        "code": "        return frozenset(elements)"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 230,
        "hits": 192,
        "total_time": 0.00422509996133158,
        "avg_time": 2.2005728965268645e-05,
        "code": "        if isinstance(event, str):"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 210,
        "hits": 192,
        "total_time": 0.004209699975035619,
        "avg_time": 2.1925520703310514e-05,
        "code": "        if isinstance(data, dict):"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 243,
        "hits": 180,
        "total_time": 0.004149199994571973,
        "avg_time": 2.3051111080955405e-05,
        "code": "        if elements == ['']:"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 195,
        "hits": 192,
        "total_time": 0.004147699983150233,
        "avg_time": 2.160260407890746e-05,
        "code": "        if isinstance(data, dict) and 'frame' in data:"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 218,
        "hits": 192,
        "total_time": 0.004096100012247916,
        "avg_time": 2.13338542304579e-05,
        "code": "            elif 'bpas' in data and data['bpas']:"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 215,
        "hits": 192,
        "total_time": 0.0040391999937128276,
        "avg_time": 2.103749996725431e-05,
        "code": "            elif 'bpa' in data:"
      },
      {
        "filename": "src/core/dempster_core.py",
        "line": 11,
        "hits": 192,
        "total_time": 0.004038600040075835,
        "avg_time": 2.1034375208728306e-05,
        "code": "        self.frame = frame_of_discernment"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 239,
        "hits": 180,
        "total_time": 0.004035700003441889,
        "avg_time": 2.242055557467716e-05,
        "code": "        if subset_str == \"{}\":"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 219,
        "hits": 192,
        "total_time": 0.003994799953943584,
        "avg_time": 2.0806249760122835e-05,
        "code": "                return data['bpas'][0]"
      },
      {
        "filename": "src/adapters/our_adapter.py",
        "line": 196,
        "hits": 192,
        "total_time": 0.003943400020943955,
        "avg_time": 2.0538541775749763e-05,
        "code": "            return data['frame']"
      },
      {
        "filename": "src/profiling/core/cpu_profiler.py",
        "line": 92,
        "hits": 184,
        "total_time": 0.0037308000173652545,
        "avg_time": 2.0276087050898123e-05,
        "code": "            stat[0] - stat[1] if len(stat) > 1 and stat[1] > 0 else stat[0]"
      }
    ]
  },
  "metadata": {
    "profiler_name": "line",
    "duration_seconds": 1.1087475000022096,
    "start_time": 46230.9310844,
    "end_time": 46232.0398319,
    "raw_profile_mode": "full",
    "sanitize_paths": true,
    "step_repeat_count": 2
  },
  "_metadata": {
    "profiler": "line",
    "test_name": "large_001",
    "step_name": "step1_original",
    "repeat_count": 2,
    "saved_at": "2026-02-12T19:57:02.266118"
  }
}